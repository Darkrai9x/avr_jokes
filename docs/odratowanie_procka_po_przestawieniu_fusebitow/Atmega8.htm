<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
 <body bgcolor="#AFEEEE">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<meta http-equiv=Content-Type content="text/html; charset=windows-1250">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="./Atmega8_pliki/filelist.xml">
<title>Atmega8, jak go zaprogramowaæ</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>PPP</o:Author>
  <o:LastAuthor>PPP</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>94</o:TotalTime>
  <o:Created>2006-01-15T12:08:00Z</o:Created>
  <o:LastSaved>2006-01-15T12:08:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>599</o:Words>
  <o:Characters>3417</o:Characters>
  <o:Lines>28</o:Lines>
  <o:Paragraphs>6</o:Paragraphs>
  <o:CharactersWithSpaces>4196</o:CharactersWithSpaces>
  <o:Version>9.2812</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:HyphenationZone>21</w:HyphenationZone>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Standardowy;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:16.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-font-kerning:0pt;
	font-weight:normal;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
@list l0
	{mso-list-id:1511867336;
	mso-list-type:hybrid;
	mso-list-template-ids:573186034 68485135 -77269308 68485147 68485135 68485145 68485147 68485135 68485145 68485147;}
@list l0:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level2
	{mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
</head>

<body lang=PL style='tab-interval:35.4pt'>

<div class=Section1>

<h2>Atmega8, jak go zaprogramowaæ</h2>

<p class=MsoNormal><span style='font-size:16.0pt;mso-bidi-font-size:12.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>
   <h3>
<ol style='margin-top:0cm' start=1 type=1>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>W komputerze mamy
     zainstalowany program Bascom AVR.. Na ekranie mamy skrót do tego programu.
     <o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Klik prawym klawiszem
     myszy na puste miejsce na ekranie. Wybieramy Nowy Folder,<span
     style="mso-spacerun: yes">  </span>klik na Folder.<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Na pulpicie mamy nowy
     folder. Klik na niego prawym klawiszem, zmieniamy nazwê, np.
     ProgramyBascom.<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Wracamy do pkt 1. Klik
     2X na skrót Bascom AVR.<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Otworzy³o siê okno
     Bascom-AVR IDE. Tu bêdziemy pisaæ program.<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>W pasku menu (u góry)
     klik na File, Save As... .Otworzy³o siê okienko Zapisywanie jako. W pasku
     Zapisz w: umieszczamy folder, który utworzyli¶my na pulpicie. Na dole, w
     pasku Nazwa pliku nadajemy nazwê, np. Licznik.bas.<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Teraz piszemy program.
     Na samym pocz±tku napiszmy sobie<span style="mso-spacerun: yes"> 
     </span>informacjê, co to za program, czego dotyczy (przydaje siê bardzo
     pó¼niej) zaczynaj±c zdanie od apostrofu (kompilator tego nie widzi).<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Do gniazda drukarkowego
     mamy pod³±czony (wcze¶niej) kabel, który z kolei do³±czony jest do p³ytki
     z procesorem Atmega8, czyli do: Reset, SCK, MISO, MOSI. P³ytka do³±czona
     jest do +5V. Je¶li ma byæ do³±czony równie¿ Lcd, to nale¿y go oczywi¶cie
     wcze¶niej skonfigurowaæ. Pamiêtaj o dok³adnym skonfigurowniu portów do
     których bêdzie do³±czony Lcd..<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Wracamy do pkt 7.
     Nadesz³a chwila, aby sprawdziæ czê¶æ napisanego programu. Kompilujemy go,
     naciskaj±c klawisz F7. Na ekranie widzimy przebieg kompilacji. Je¶li
     pope³nili¶my b³±d, na dole ekranu pojawi siê komunikat o b³êdzie.
     Nastêpnie naciskamy F4. Na ekranie widzimy proces zapisu do pamiêci
     procesora. Je¶li bêdzie komunikat o b³êdnym wpisie, F4 ponownie.<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Je¶li w tym momencie
     macie w±tpliwo¶æ jakim programatorem to wszystko robiæ, to przypominam, ¿e
     chodzi o programator (odpowiednik Stk200/Stk300), którego opis jest na
     mojej stronie internetowej.<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Teraz dochodzimy do
     momentu, w którym mo¿e wyst±piæ problem Fuse bitów. Je¶li na ekranie
     pojawi³ siê komunikat, ¿e kompilator nie mo¿e rozpoznaæ procesora, to mo¿e
     byæ to spowodowane:<o:p></o:p></span></li>
</ol>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-18.0pt;mso-list:l0 level2 lfo1;
tab-stops:list 72.0pt'><![if !supportLists]><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>brakiem
zasilania p³ytki z procesorem,<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-18.0pt;mso-list:l0 level2 lfo1;
tab-stops:list 72.0pt'><![if !supportLists]><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>b³êdnym
zadeklarowaniem nazwy procesora. Jak to zrobiæ: w Menu klik na Options, Programer,
Compiler i w okienku Chip ustawiamy prawid³ow± nazwê procesora i Ok.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-18.0pt;mso-list:l0 level2 lfo1;
tab-stops:list 72.0pt'><![if !supportLists]><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>b³±dnym
ustawieniem Fuse bitu (je¶li przypadkowo go zmieniono). Nowy procesor, kupiony
w sklepie ma ustawione Fuse bity tak, ¿e mo¿na go od razu programowaæ. Nale¿y
tylko pamiêtaæ, ¿e bêdzie taktowany wewnêtrznym generatorem RC o czêstotliwo¶ci
1MHz.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt'><span
style="mso-spacerun: yes">         </span>12. Zmieniamy czêstotliwo¶æ
generatora wewnêtrznego. Gdzie s± te Fuse bity?. U góry ekranu mamy<span
style="mso-spacerun: yes">                          </span><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt'><span
style="mso-spacerun: yes">               </span>mamy pasek narzêdziowy. Szukamy
(kursorem) zielonej ikonki, która ma nazwê Run programer(F4), <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">        </span>klik,
wybieramy Manual program. Otwiera siê okno pokazuj±ce stan pamiêci FlashROM,
EEPROM i<span style="mso-spacerun: yes">  </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:EN-US'><span
style="mso-spacerun: yes">        </span>Lock and Fuse Bits. </span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>U góry w okienku Chip musi
byæ M8. Klik na FlashROM i nastêpnie na Lock and<span style="mso-spacerun:
yes">   </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">        </span>Fuse
Bits. Widzimy ju¿ wszystkie Fuse bity. Klik na linijkê FusebitA987, po prawej
stronie tej linijki.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">        </span>mamy
strza³kê wyboru. Je¶li obok napisu Fusebit jest liczba 0001, to jest
zaprogramowany wewnêtrzny <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">       
</span>oscylator RC 1MHz. Do wyboru mamy cztery czêstotliwo¶ci tego generatora,
0001, 0010, 0011, 0100. <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">       
</span>Przypominam, ¿e liczby te w kodzie BCD oznaczaj± kolejno: 1, 2, 3. Je¶li
chcemy zmieniæ <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">       
</span>czêstotliwo¶æ na wy¿sz±, to zaznaczamy odpowiedni± liczbê i zatwierdzamy
to przyciskiem z prawej <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">      
</span>strony<span style="mso-spacerun: yes">  </span>o nazwie WriteFS. <o:p></o:p></span></p>

<ol style='margin-top:0cm' start=13 type=1>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list 36.0pt'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt'>Zdarza siê, ¿e po
     ustawieniu jakiego¶ bitu i próbie ponownego programowania procesora,
     mamy<span style="mso-spacerun: yes">   </span><o:p></o:p></span></li>
</ol>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">      
</span>komunikat, ¿e kompilator nie rozpoznaje procesora. Aby teraz cofn±æ to
b³êdne ustawienie bitu nale¿y <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">      
</span>uruchomiæ procesor przy pomocy zewnêtrznego generatora. Zewnêtrznym
generatorem mo¿e byæ inny <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">      
</span>procesor na p³ytce, np. 90S2313. £±czymy wiêc Prtb.6 Atmegi8 z nó¿k± X1
lub X2 90S2313.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">       </span>Masy
obydwu p³ytek po³±czone, zasilanie +5V w³±czone. Teraz otwieramy Fuse bity i
zmieniamy<span style="mso-spacerun: yes">   </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">      
</span>feralne ustawienie. Je¶li wszystko przebieg³o pomy¶lnie, procesor jest
gotów do dalszego <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">      
</span>programowania. Je¶li nie odpowiada nam praca procesora na wewnêtrznym
oscylatorze z powodu np. <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">       </span>zbyt
niskiej czêstotliwo¶ci, to mo¿emy przej¶æ na oscylacjê kwarcow±. Do³±czamy
wówczas kwarc i <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">       </span>dwa
kondensatory do procesora, a nastêpnie przystêpujemy do ustawienia Fuse bitu.
Otwieramy okno z<span style="mso-spacerun: yes">            </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><span style="mso-spacerun: yes">       </span>Fuse
bitami i ustawiamy Fusebit A987 na 1101:1101 internal osc. i WriteFS. Kwarc
jest ustawiony.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt'>
<span style="mso-spacerun:
yes">  </span><o:p></o:p></span></p>
<br>14. Teraz opiszê jak ustawiæ Fusebity.<br>
Przypominam, ¿e ka¿de ustawienie zatwierdzimy przyciskiem wirtualnym po prawej stronie o nazwie WriteFS. 
A wiêc szukamy linijki o nazwie (gdzie jest ta linijka szukaj w tek¶cie powy¿ej) Fusebit A987, zaznaczamy j± kursorem
i naciskamy przycisk wyboru, który pojawi³ siê po prawej stronie tej linijki.<br>
Fusebity.<br>
1. 0000 = czêstotliwo¶æ z zewnêtrznego generatora, <br>
2. 0001 = oscylator w wewn±trz procesora o czêstotliwo¶ci 1MHz,<br>
3. 0010 = wewnêtrzny oscylator 2MHz,<br>
4. 0011 = wewnêtrzny oscylator 4MHz,<br>
5. 0100 = wewnêtrzny oscylator 8MHz,<br>
6. 0101 = zewnêtrzny oscylator RC 1MHz,<br>
7. 0110 = zewnêtrzny oscylator RC 2MHz,<br>
8. 0111 = zewnêtrzny oscylator RC 4MHz,<br>
9. 1000 = zewnêtrzny oscylator RC 8MHz,<br>
10. 1001 = zewnêtrzny kwarc z kondensatorami 2MHz,<br>
11. 1010 = zewnêtrzny kwarc z kondensatorami 2-4MHz,<br>
12. 1011 = zewnêtrzny kwarc z kondensatorami 4-6MHz,<br>
13. 1100 = zewnêtrzny kwarc z kondensatorami 6-8MHz,<br>
14. 1101 = zewnêtrzny kwarc z kondensatorami 8-10MHz,<br>
15. 1110 = zewnêtrzny kwarc z kondensatorami 10-16MHz.<br>
<br>
Z ustawieñ Fusebitów wynika, ¿e je¶li nie chcemy czêstotliwo¶ci oscylatora powy¿ej 8MHz, to mo¿emy nie stosowaæ zewnêtrznego kwarcu.
Wystarczy ustawiæ oscylator wewnêtrzny. Stosuj±c kwarc zewnêtrzy ustawiamy jedn± z pozycji zawartej pomiêdzy 10 a 15.
                                             
 </h3>
 <br>
 <h3>
 Poni¿sze zdjêcie pokazuje do¶wiadczalny sposób programowania procesora na swojej p³ytce
  wspó³pracuj±cej z innymi czê¶ciami elektronicznymi tworz±cymi przysz³y uk³ad elektroniczny.
  Taki sposób pozwala na dobór elementów i ich warto¶ci oraz sporz±dzenie dok³adnego schematu
  urz±dzenia. Szybkie lutowanie (na cynowanych blaszkach) pozwala rozbudowywaæ uk³ad, zmieniaæ
  koncepcjê, a tak¿e pisaæ i zmieniaæ program procesora. Wygl±da to nie ciekawie, ale bardzo u³atwia
  pracê. Polecam.
   <br> <br>
 <IMG SRC="../ProgramyBMP/DSC01347.JPG" BORDER="0" Width="980" Height="680">
  <br> <br>
  <IMG SRC="../ProgramyBMP/DSC01349.JPG" BORDER="0" Width="980" Height="680">
   <br> <br>
  A, to p³ytka do programowania Atmegi. </h3>
 <IMG SRC="../ProgramyBMP/M8.JPG" BORDER="0" Width="980" Height="680">
    <br><br>
    <B>Poni¿ej mamy generator kwarcowy do uruchamiania zdech³ego Atmega8.</B>
     <IMG SRC="../ProgramyBMP/Generator4MHz.PNG" BORDER="0" Width="961" Height="640"> <br><br>
    <h2>Jedno z wyj¶æ generatora (wy1,2 lub 3) do³±czamy do Portb.6 Atmega8, masy z³±czone razem, w³±czamy zasilanie i poprawiamy ¼le nastawiony Fusebit. Przywrócili¶my procesor do ¿ycia. </h2><br><br>
    <IMG SRC="../ProgramyBMP/Gen4MHz.JPG" BORDER="0" Width="680" Height="480">
     <IMG SRC="../ProgramyBMP/1Gen4MHz.JPG" BORDER="0" Width="680" Height="480">


</div>

</body>

</html>
